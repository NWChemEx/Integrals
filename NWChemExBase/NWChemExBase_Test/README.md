NWChemExBase_Test Directory
===========================

This directory contains a series of unit tests to ensure that NWChemExBase is
working correctly.

The basic tests are:

1. SimpleRepo : Makes a basically empty library that does nothing
2. DebugHonored : Ensures `CMAKE_BUILD_TYPE=Debug` propagates to project
3. ReleaseHonored : Ensures `CMAKE_BUILD_TYPE=Release` propagates to project
4. SkipTests : Ensures `BUILD_TESTS=False` skips building tests

The following tests ensure we can build dependencies and that the project is 
provided the proper includes/libraries for compiling.

1. BuildLibInt
2. BuildEigen3

Testing NWChemExBase
--------------------

To test NWChemExBase one runs CMake in `NWChemExBase_Test`.  This will register
a CTest test for each directory  in `NWChemExBase_Test`.  Additionally, it will
copy the files needed for testing over to the build directory.  After the CMake
command finishes one runs the tests (there's not build or install steps) using
CTest.

Each test is driven by the `RunNWChemExBaseTest.sh` script.  This script will:

1. Make a clean directory for the test
2. Run the `BasicSetup.sh` script to set up the directory
3. Patch the template "CMakeLists.txt" generated by step 2
4. Generate a header file for the test class
5. Copy the source files for the test over to the new directory
6. Generate source for an executable that calls the test class's `run_test`
6. Run CMake in the now set up directory
7. Run Make in the resulting build directory
8. Run CTest in the build directory

Each test must minimally provide `<test_name>.cpp` and `CMakeVars.txt`.  These
files must then reside in a sub-folder named `<test_name>_files` which in turn 
resides in the current directory (NWChemExBase_Test). The C++ source file should
look like:

~~~.cpp
//Replace <test_name> with the case-sensitive name of your test
#include "<test_name>/<test_name>.hpp"
void <test_name>::run_test()
{
   //Definition of the test goes here...
}
~~~
 
For example to test if the project was compiled in debug mode the test looks 
to see if `NDEUBG` is defined, if it is the test crashes.  The second file, 
`CMakeVars.txt`, should include the CMake variables to be passed to the test.
To be a bit more specific, this file should be a legitimate CMake script with a
series of lines like:
 
~~~.cmake
set(<variable_name> <value> CACHE <variable_type> "")
~~~

Where `<variable_name>` is the variable to set, `<value>` is the value to set
the variable to, and `<variable_type>` is the type of the variable (the `""` 
is the help string to display when the CMakeCache.txt file is parsed by the 
CMake GUI, but I can't fathom anyone's ever going to look at the resulting 
cache in the GUI so why bother setting it?).
